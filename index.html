<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì²­ê°œêµ¬ë¦¬ ì‚¬ì „ì ê²€ AIì•± (v16.3 Hybrid Input)</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- [v16.3 ë””ìì¸ ì‹œìŠ¤í…œ] --- */
        :root {
            --primary-grad: linear-gradient(135deg, #00b09b, #96c93d);
            --header-grad: linear-gradient(135deg, #134E5E, #71B280);
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-main: #2d3436;
            --text-sub: #636e72;
            --shadow-soft: 0 10px 25px rgba(0,0,0,0.05);
            --dev-color: #8e44ad;
            --container-max-width: 600px;
        }

        body { 
            margin: 0; padding: 0; 
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-color); 
            color: var(--text-main); 
            line-height: 1.5; 
            padding-bottom: 80px; 
            -webkit-font-smoothing: antialiased;
            display: flex; justify-content: center;
        }

        .app-container {
            width: 100%; max-width: var(--container-max-width);
            background: var(--bg-color); box-shadow: 0 0 20px rgba(0,0,0,0.1);
            min-height: 100vh; position: relative;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header-container { background: var(--header-grad); padding: 15px 20px; border-radius: 0 0 24px 24px; display: flex; align-items: center; gap: 12px; box-shadow: 0 4px 15px rgba(19, 78, 94, 0.3); position: relative; z-index: 100; margin-bottom: 20px; }
        .header-frog-img { height: 45px; width: 45px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255,255,255,0.8); background-color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); flex-shrink: 0; }
        .header-text-group { flex: 1; display: flex; flex-direction: column; justify-content: center; overflow: hidden; }
        .header-title { color: white; font-size: 1.2rem; font-weight: 800; margin: 0; line-height: 1.2; text-shadow: 0 2px 4px rgba(0,0,0,0.1); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .version-badge { font-size: 0.65rem; background: rgba(0,0,0,0.25); color: rgba(255,255,255,0.9); padding: 2px 6px; border-radius: 6px; font-weight: 600; backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.1); cursor: pointer; transition: all 0.3s ease; align-self: flex-end; width: fit-content; margin-top: 4px; }
        .version-badge.dev-active { background: var(--dev-color) !important; box-shadow: 0 0 10px rgba(142, 68, 173, 0.6); border: 1px solid #d2b4de; transform: scale(1.05); }

        /* ìƒíƒœë°” */
        .status-bar-container { display: flex; justify-content: space-between; align-items: center; padding: 0 20px; margin-bottom: 20px; }
        .status-pill { background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; color: var(--text-sub); box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 6px; }
        .btn-manual-3d { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 8px 16px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 10px rgba(118, 75, 162, 0.3); transition: transform 0.1s; }
        .btn-manual-3d:active { transform: scale(0.95); }

        /* ë©”ì¸ ì¹´ë“œ */
        .main-card { background: var(--card-bg); padding: 25px 20px; margin: 0 10px 25px 10px; border-radius: 24px; box-shadow: var(--shadow-soft); border: 1px solid rgba(255,255,255,0.8); }
        .input-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .input-col { display: flex; flex-direction: column; gap: 8px; width: 100%; }
        .input-label { font-size: 0.8rem; font-weight: 700; color: #636e72; margin-left: 4px; display:flex; align-items:center; gap:5px; }
        input, select, textarea { width: 100%; padding: 12px; font-size: 0.95rem; border: none; border-radius: 12px; background: #f1f3f5; color: #2d3436; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        input:focus, select:focus, textarea:focus { background: #fff; outline: none; box-shadow: 0 0 0 2px #00b09b; }
        textarea { height: 100px; resize: none; line-height: 1.6; } 
        .site-inputs { display: flex; gap: 5px; }
        .site-inputs input { text-align: center; font-weight: 700; color: #2d3436; } 
        .site-info-group { flex: 7; } .location-group { flex: 3; } .triple-col { flex: 1; }
        .full-address-row { margin-bottom: 20px; }

        /* ë“€ì–¼ í¬í†  */
        .photo-section { display: flex; flex-direction: column; gap: 20px; margin: 25px 0; }
        .photo-area-wide, .photo-area-close { width: 100%; aspect-ratio: 4 / 3; border-radius: 16px; position: relative; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        .photo-area-wide { background: #f0f8ff; border: 2px dashed #3498db; }
        .photo-area-wide .photo-text { color: #3498db; font-size: 0.9rem; font-weight: 700; margin-top: 8px; }
        .photo-area-close { background: #eefbf3; border: 2px dashed #00b09b; }
        .photo-icon { font-size: 2.5rem; margin-bottom: 8px; background: linear-gradient(135deg, #00b09b, #96c93d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .photo-text { font-size: 0.9rem; font-weight: 700; text-align: center; pointer-events: none; line-height: 1.4; }
        .preview-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; display: none; z-index: 10; background-color: #000; }
        .center-crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; pointer-events: none; z-index: 20; }
        .center-crosshair::before, .center-crosshair::after { content: ''; position: absolute; background: rgba(231, 76, 60, 0.8); }
        .center-crosshair::before { width: 100%; height: 2px; top: 50%; }
        .center-crosshair::after { height: 100%; width: 2px; left: 50%; }

        .legal-inline-box { margin-top: 20px; padding: 15px; background: #fffbe6; border: 1px solid #ffeaa7; border-radius: 12px; }
        .legal-title-small { font-size: 0.9rem; font-weight: 800; color: #d35400; margin-bottom: 8px; display: flex; align-items: center; gap: 5px; }
        .legal-text-small { font-size: 0.8rem; color: #636e72; line-height: 1.5; margin-bottom: 12px; }
        .legal-check-row { display: flex; align-items: center; gap: 8px; cursor: pointer; width: 100%; }
        .legal-check-row input { width: 18px; height: 18px; margin: 0; cursor: pointer; accent-color: #d35400; flex-shrink: 0; }
        .legal-check-row label { font-size: 0.85rem; font-weight: 700; color: #2d3436; cursor: pointer; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .btn-save-next { background: linear-gradient(to bottom, #3498db, #2980b9); color: white; border: none; padding: 14px 24px; border-radius: 12px; font-weight: 800; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 0 #1c5985, 0 5px 10px rgba(0,0,0,0.2); width: 100%; margin-top: 20px; }
        .btn-save-next:active { transform: translateY(4px); box-shadow: 0 0 0 #1c5985; }
        .btn-save-next:disabled { background: #b2bec3; cursor: not-allowed; box-shadow: none; transform: none; }

        /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        .list-area { padding: 0 10px 10px 10px; margin-top: 20px; }
        .list-header-box { margin-bottom: 15px; background: #fff; padding: 15px; border-radius: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); display: flex; justify-content: space-between; align-items: center; border-left: 6px solid #00b09b; }
        .list-title-text { font-size: 1rem; font-weight: 800; color: #2d3436; }
        .list-subtitle-text { font-size: 0.85rem; color: #00b09b; font-weight: 600; }
        .list-item { background: white; padding: 12px; border-radius: 16px; margin-bottom: 12px; display: flex; flex-direction: column; gap: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.04); border: 1px solid #f1f3f5; }
        .list-photos { display: flex; gap: 8px; width: 100%; }
        .list-thumb { width: 50%; aspect-ratio: 4/3; border-radius: 8px; object-fit: cover; border: 1px solid #eee; background-color: #f9f9f9; }
        .list-content { flex: 1; display: flex; flex-direction: column; gap: 4px; }
        .list-room-work { font-weight: 800; font-size: 1rem; color: #2d3436; border-bottom: 1px dashed #eee; padding-bottom: 5px; margin-bottom: 5px; }
        .list-type { font-size: 0.85rem; color: #e74c3c; font-weight: 700; background: #fff5f5; padding: 2px 8px; border-radius: 4px; align-self: flex-start; }
        .list-detail { font-size: 0.9rem; color: #636e72; line-height: 1.5; white-space: pre-wrap; }
        .list-footer { display: flex; justify-content: flex-end; gap: 8px; margin-top: 5px; }
        .btn-edit-item, .btn-delete-item { border: none; border-radius: 6px; padding: 8px 16px; font-size: 0.8rem; cursor: pointer; font-weight: bold; color: white; }
        .btn-edit-item { background: #f39c12; }
        .btn-delete-item { background: #b2bec3; }

        /* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ */
        .bottom-actions { display: flex; gap: 8px; padding: 0 10px 20px 10px; margin-top: 30px; }
        .btn-3d { 
            flex: 1; padding: 10px 0; border: none; border-radius: 12px; 
            color: white; font-size: 0.85rem; font-weight: 800; cursor: pointer; 
            display: flex; flex-direction: row; align-items: center; justify-content: center; 
            gap: 5px; transition: all 0.1s; position: relative; text-decoration: none; 
        }
        .btn-pdf-3d { background: linear-gradient(to bottom, #2ecc71, #27ae60); box-shadow: 0 4px 0 #1e8449, 0 5px 10px rgba(46, 204, 113, 0.3); }
        .btn-pdf-3d:active { transform: translateY(4px); box-shadow: 0 0 0 #1e8449; }
        
        .btn-reserve-3d { background: linear-gradient(to bottom, #9b59b6, #8e44ad); box-shadow: 0 4px 0 #71368a, 0 5px 10px rgba(155, 89, 182, 0.3); }
        .btn-reserve-3d:active { transform: translateY(4px); box-shadow: 0 0 0 #71368a; }
        
        .btn-call-3d { background: linear-gradient(to bottom, #f39c12, #d35400); box-shadow: 0 4px 0 #a04000, 0 5px 10px rgba(230, 126, 34, 0.3); }
        .btn-call-3d:active { transform: translateY(4px); box-shadow: 0 0 0 #a04000; }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
        .modal-content { background: white; width: 85%; max-width: 400px; border-radius: 24px; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); text-align: center; animation: popUp 0.3s ease-out; }
        @keyframes popUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-title { font-size: 1.3rem; font-weight: 900; color: #2d3436; margin-bottom: 20px; }
        .price-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 0.9rem; }
        .price-table th, .price-table td { border-bottom: 1px solid #eee; padding: 10px; text-align: left; }
        .price-table th { background: #f8f9fa; color: #2d3436; font-weight: 800; }
        .price-table td { color: #636e72; }
        .price-highlight { color: #8e44ad; font-weight: 800; }
        .warning-box { background: #fff9e6; color: #d35400; padding: 15px; border-radius: 12px; font-size: 0.85rem; text-align: left; margin-bottom: 20px; border: 1px solid #ffeaa7; line-height: 1.5; }
        .btn-modal-close-3d { width: 100%; padding: 14px 0; border: none; border-radius: 16px; color: white; font-size: 1rem; font-weight: 800; cursor: pointer; margin-top: 15px; background: linear-gradient(to bottom, #1abc9c, #16a085); box-shadow: 0 4px 0 #12876f; }
        .btn-modal-close-3d:active { transform: translateY(4px); box-shadow: 0 0 0 #12876f; }
        .footer-info { text-align: center; padding: 20px 10px; color: #b2bec3; font-size: 0.7rem; line-height: 1.4; border-top: 1px solid #dfe6e9; margin-top: 30px; background: #fff; }
        .footer-info p { margin: 2px 0; padding: 0; }
        .footer-bold { font-weight: 800; color: #636e72; }
        .manual-check-row { display: flex; align-items: center; gap: 10px; cursor: pointer; margin-top: 20px; padding: 10px; background: #f1f3f5; border-radius: 12px; }
        .manual-check-row input { width: 20px; height: 20px; margin: 0; cursor: pointer; accent-color: #00b09b; }
        .manual-check-row label { font-size: 1rem; font-weight: 700; color: #2d3436; cursor: pointer; margin: 0; }

        /* ì±—ë´‡ ìŠ¤íƒ€ì¼ */
        .chat-float-btn {
            position: fixed; bottom: 20px; right: 20px;
            width: 60px; height: 60px;
            background: linear-gradient(135deg, #00b09b, #96c93d);
            border-radius: 50%;
            box-shadow: 0 5px 20px rgba(0, 176, 155, 0.4);
            display: flex; align-items: center; justify-content: center;
            color: white; 
            font-size: 1rem; /* ê¸€ì í¬ê¸° ì¡°ì • */
            font-weight: 800; /* ê¸€ì êµµê²Œ */
            cursor: pointer;
            z-index: 999;
            transition: transform 0.2s;
        }
        .chat-float-btn:hover { transform: scale(1.1); }
        .chat-float-btn:active { transform: scale(0.95); }

        .chat-window {
            position: fixed; bottom: 90px; right: 20px;
            width: 320px; height: 450px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 2px solid #00b09b;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .chat-header {
            background: #00b09b; color: white; padding: 15px;
            font-weight: 800; display: flex; justify-content: space-between; align-items: center;
        }
        .chat-close-btn { cursor: pointer; font-size: 1.2rem; }
        
        .chat-body {
            flex: 1; padding: 15px; overflow-y: auto; background: #f0f4f8;
            display: flex; flex-direction: column; gap: 10px;
        }
        .chat-bubble {
            max-width: 80%; padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.4;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .chat-bot { background: white; align-self: flex-start; border-top-left-radius: 0; border: 1px solid #eee; }
        .chat-user { background: #00b09b; color: white; align-self: flex-end; border-top-right-radius: 0; }

        .chat-options {
            padding: 10px; background: white; border-top: 1px solid #eee;
            display: grid; grid-template-columns: 1fr 1fr; gap: 8px;
        }
        .chat-option-btn {
            background: #eefbf3; border: 1px solid #00b09b; color: #00b09b;
            padding: 8px; border-radius: 8px; font-size: 0.85rem; font-weight: 700; cursor: pointer;
            text-align: center;
        }
        .chat-option-btn:hover { background: #00b09b; color: white; }

        @media print {
            body { background: white; padding: 0; display: block; }
            .app-container { max-width: 100%; box-shadow: none; }
            .header-container, .main-card, .bottom-actions, .footer-info, .status-bar-container, .list-footer, .chat-float-btn, .chat-window { display: none !important; } 
            .list-area { padding: 0; margin: 0; }
            .list-header-box { border: none; padding: 0; margin-bottom: 20px; border-bottom: 2px solid #333; border-radius: 0; box-shadow: none; }
            .list-item { border: 1px solid #000; box-shadow: none; break-inside: avoid; margin-bottom: 20px; padding: 15px; }
            .list-photos { display: flex !important; gap: 10px; margin-bottom: 10px; }
            .list-thumb { width: 50% !important; height: auto; aspect-ratio: 4/3; object-fit: contain; border: 1px solid #ccc; }
            #pdf-header-title { display: block !important; text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 20px; padding-top: 20px;}
            #pdf-disclaimer { display: block !important; margin-top: 30px; font-size: 10px; color: #666; text-align: center; border-top: 1px solid #ddd; padding-top: 10px; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="paidServiceModal" class="modal-overlay" style="display:none;">
            <div class="modal-content">
                <div class="modal-title" style="color:#8e44ad;">ğŸ¸ ìœ ë£Œ ì‚¬ì „ì ê²€ ì•ˆë‚´</div>
                <div style="text-align:left; font-size:0.9rem; margin-bottom:15px; color:#555;">
                    ì²­ê°œêµ¬ë¦¬ëŠ” ë¶ˆí•„ìš”í•œ ì ê²€(ë¼ëˆì¸¡ì •, ê³µê¸°ì§ˆì¸¡ì •, ì—´í™”ìƒê²€ì‚¬, ê¸°íƒ€)ë¥¼ ìƒëµí•˜ê³  ì¤‘ëŒ€í•˜ìë¥¼ ì¤‘ì ìœ¼ë¡œ ê²€ì‚¬í•©ë‹ˆë‹¤. ìˆ˜ë„ê¶Œ ì´ì™¸ëŠ” ì¶”ê°€ìš”ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤. (ì§í†µ) 010-2322-0949
                </div>
                <table class="price-table">
                    <tr><th>20í‰í˜•</th><td class="price-highlight">90,000ì›</td></tr>
                    <tr><th>30í‰í˜•</th><td class="price-highlight">110,000ì›</td></tr>
                    <tr><th>40í‰í˜•</th><td class="price-highlight">130,000ì›</td></tr>
                    <tr><th>50í‰í˜•</th><td class="price-highlight">150,000ì›</td></tr>
                    <tr><th>ê¸°íƒ€</th><td>ë³„ë„ ìƒë‹´</td></tr>
                </table>
                <div class="warning-box">
                    <b>[ì˜ˆì•½ ë° í™˜ë¶ˆ ê·œì •]</b><br>
                    1. <b>ì„ ì…ê¸ˆ í›„ ê¼­ ì§í†µ(010-2322-0949)ìœ¼ë¡œ ì…ê¸ˆìì™€ ì£¼ì†Œ, ë°©ë¬¸ì¼/ì‹œê°„ì„ ë¬¸ìë¡œ ë³´ë‚´ì£¼ì‹œë©´ í™•ì •ì—¬ë¶€ë¥¼ í†µë³´í•´ ë“œë¦½ë‹ˆë‹¤.</b><br>
                    2. ë°©ë¬¸ <b>7ì¼ ì „ ì·¨ì†Œ ì‹œ 100% í™˜ë¶ˆ</b>ë©ë‹ˆë‹¤.<br>
                    3. ê·¸ ì™¸ ê¸°ê°„ì€ í™˜ë¶ˆì´ ë¶ˆê°€í•©ë‹ˆë‹¤.<br>
                    4. ì˜ˆì•½ì„œ ì‘ì„± ì‹œ ìœ„ ë‚´ìš©ì— ë™ì˜í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.
                </div>
                <button class="btn-modal-close-3d" onclick="window.goToGoogleForm()">
                    <i class="fa-solid fa-pen-to-square"></i> ì˜ˆì•½ ì‹ ì²­ì„œ ì‘ì„±í•˜ê¸°
                </button>
                <button onclick="document.getElementById('paidServiceModal').style.display='none'" style="margin-top:10px; background:none; border:none; color:#999; text-decoration:underline; cursor:pointer;">ë‹«ê¸°</button>
            </div>
        </div>

        <div class="header-container">
            <img src="froginspector.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3069/3069172.png'" class="header-frog-img">
            <div class="header-text-group">
                <h2 class="header-title">ì²­ê°œêµ¬ë¦¬ ì‚¬ì „ì ê²€ AIì•±(ë¬´ë£Œ)</h2>
                <span class="version-badge" id="versionBadge" onclick="window.checkDevMode()">v16.3 Hybrid Input</span>
            </div>
        </div>
        
        <div class="status-bar-container">
            <div class="status-pill" id="statusPill">
                <i class="fa-solid fa-circle-check" style="color:#00b09b;"></i>
                <span id="statusMsg">AI ë¶„ì„ ì—”ì§„ ëŒ€ê¸° ì¤‘</span>
            </div>
            <button class="btn-manual-3d" onclick="window.openManual()">
                ì‚¬ìš©ì„¤ëª…ì„œ <i class="fa-solid fa-book-open"></i>
            </button>
        </div>

        <div class="main-card">
            <div class="full-address-row">
                <div class="input-label"><i class="fa-solid fa-map-location-dot"></i> ì „ì²´ ì£¼ì†Œ ì…ë ¥</div>
                <input type="text" id="fullAddress" placeholder="ì„œìš¸ ì†¡íŒŒêµ¬ ***">
            </div>

            <div class="input-row">
                <div class="input-col site-info-group">
                    <label class="input-label">A. í˜„ì¥ ì •ë³´ (ë¦¬í¬íŠ¸ìš©)</label>
                    <div class="site-inputs">
                        <input type="text" id="aptName" placeholder="ì•„íŒŒíŠ¸ëª…" style="flex:1.5;">
                        <input type="tel" id="aptDong" placeholder="000ë™" style="flex:1;">
                        <input type="tel" id="aptHo" placeholder="0000í˜¸" style="flex:1;">
                    </div>
                </div>
                <div class="input-col location-group">
                    <label class="input-label">B. ìœ„ì¹˜</label>
                    <select id="roomSelect">
                        <option value="">ì„ íƒ</option>
                        <option value="ê±°ì‹¤">ê±°ì‹¤</option>
                        <option value="ì£¼ë°©">ì£¼ë°©</option>
                        <option value="ì¹¨ì‹¤1">ì¹¨ì‹¤1</option>
                        <option value="ì¹¨ì‹¤2">ì¹¨ì‹¤2</option>
                        <option value="ì¹¨ì‹¤3">ì¹¨ì‹¤3</option>
                        <option value="ì•ˆë°©">ì•ˆë°©</option>
                        <option value="ìš•ì‹¤1">ìš•ì‹¤1</option>
                        <option value="ìš•ì‹¤2">ìš•ì‹¤2</option>
                        <option value="í˜„ê´€">í˜„ê´€</option>
                        <option value="ë°œì½”ë‹ˆ">ë°œì½”ë‹ˆ</option>
                        <option value="ë‹¤ìš©ë„ì‹¤">ë‹¤ìš©ë„ì‹¤</option>
                    </select>
                </div>
            </div>

            <div class="photo-section">
                <input type="file" id="cameraInputWide" accept="image/*" style="display:none">
                <label class="photo-area-wide" for="cameraInputWide">
                    <div style="text-align:center;">
                        <i class="fa-solid fa-image" style="color:#3498db; font-size:2rem; margin-bottom:5px;"></i>
                        <div class="photo-text" style="color:#3498db;">1. ë©€ë¦¬ì„œ ì°ê¸° (ìœ„ì¹˜ íŒŒì•…ìš©)</div>
                    </div>
                    <img id="previewImageWide" class="preview-img">
                </label>

                <input type="file" id="cameraInputClose" accept="image/*" style="display:none">
                <label class="photo-area-close" id="photoAreaBtn" for="cameraInputClose">
                    <div class="photo-icon"><i class="fa-solid fa-camera-retro"></i></div>
                    <div class="photo-text">2. ê°€ê¹Œì´ ì°ê¸° (ìë™ ë¶„ì„ ì‹œì‘)<br><span style="font-size:0.75rem; color:#999;">ì‹­ìì„ ì— í•˜ìë¥¼ ë§ì¶”ì„¸ìš”</span></div>
                    <img id="previewImageClose" class="preview-img">
                    <div class="center-crosshair"></div>
                </label>
            </div>

            <div class="input-col" style="margin-bottom: 15px;">
                <label class="input-label" style="color:#8e44ad;"><i class="fa-solid fa-keyboard"></i> C. í•˜ì ë‚´ìš© (ì§ì ‘ ì…ë ¥)</label>
                <input type="text" id="userDefectInput" placeholder="ì˜ˆ) ì°½í˜¸ ìš°ì¸¡ ë‚´ë¶€ì°½ì§ ìˆ˜ì§ìˆ˜í‰ë¶ˆëŸ‰" style="background:#f8f9fa; border:1px solid #dcdde1;">
            </div>

            <div class="input-row">
                <div class="input-col triple-col">
                    <label class="input-label">D. ê³µì¢…</label>
                    <select id="workType"><option value="">ìë™ì…ë ¥</option></select>
                </div>
                <div class="input-col triple-col">
                    <label class="input-label">E. ì„¸ë¶€</label>
                    <select id="subWorkType"><option value="">ìë™ì…ë ¥</option></select>
                </div>
                <div class="input-col triple-col">
                    <label class="input-label">F. ìœ í˜•</label>
                    <input type="text" id="defectType" placeholder="ìë™ì…ë ¥">
                </div>
            </div>

            <div class="input-col" style="margin-bottom: 10px;">
                <div class="input-label" style="color:#00b09b;">
                    <i class="fa-solid fa-robot"></i> G. AI ë¶„ì„ ë¦¬í¬íŠ¸ (êµ­í† ë¶€ ë°ì´í„° AIì°¸ì¡°)
                </div>
                <textarea id="defectDetail" placeholder="ë©€ë¦¬ì„œ í•œ ì¥, ê°€ê¹Œì´ì„œ í•œ ì¥ ì°ìœ¼ì‹œë©´ AIê°€ ë” ì •í™•í•˜ê²Œ ë¶„ì„í•©ë‹ˆë‹¤."></textarea>
                
                <div class="legal-inline-box">
                    <div class="legal-title-small"><i class="fa-solid fa-triangle-exclamation"></i> ì´ìš© ì „ í•„ìˆ˜ í™•ì¸</div>
                    <div class="legal-text-small">
                        1. <b>ë²•ì  íš¨ë ¥ ì—†ìŒ:</b> ë³¸ ê²°ê³¼ëŠ” AI ì¶”ì •ì¹˜ì´ë©° ì „ë¬¸ê°€ì˜ í˜„ì¥ ì‹¤ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.<br>
                        2. <b>ì±…ì„ ì œí•œ:</b> ë¶„ì„ ì˜¤ë¥˜ ë° ë¶„ìŸì— ëŒ€í•´ ê°œë°œì‚¬ëŠ” ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </div>
                    <div class="legal-check-row">
                        <input type="checkbox" id="inlineAgreeCheck" onchange="window.toggleSaveButton()">
                        <label for="inlineAgreeCheck">ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì˜€ìœ¼ë©° ê²°ê³¼ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
                    </div>
                </div>

                <div style="text-align: right;">
                    <button class="btn-save-next" id="btnSaveList" onclick="window.addToList()" disabled>
                        ë¦¬ìŠ¤íŠ¸ ì €ì¥ <i class="fa-solid fa-download"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="pdf-header-title" style="display:none;"></div>

        <div class="list-area">
            <div class="list-header-box">
                <div class="list-title-text">ğŸ“‹ ì ê²€ ë¦¬ìŠ¤íŠ¸ <span id="listCount" style="color:#00b09b;">(0)</span></div>
                <div id="currentAptInfo" class="list-subtitle-text">ì •ë³´ ì…ë ¥ ëŒ€ê¸°</div>
            </div>
            <div id="listBox"></div>
        </div>
        
        <div id="pdf-disclaimer" style="display:none;">
            â€» ë³¸ ë¦¬í¬íŠ¸ëŠ” ì…ì£¼ì ì‚¬ì „ì ê²€ ë³´ì¡° ìë£Œì´ë©° ë²•ì  íš¨ë ¥ì´ ì—†ìŠµë‹ˆë‹¤. (ì œê³µ: ì²­ê°œêµ¬ë¦¬ìƒ¤ì‹œ)
        </div>

        <div class="bottom-actions">
            <button class="btn-3d btn-pdf-3d" onclick="window.savePDF()">
                <i class="fa-solid fa-file-pdf"></i>
                <span>ì „ì²´ì €ì¥</span>
            </button>
            <button class="btn-3d btn-reserve-3d" onclick="window.openPaidService()">
                <i class="fa-solid fa-calendar-check"></i>
                <span>ìœ ë£Œì˜ˆì•½</span>
            </button>
            <button class="btn-3d btn-call-3d" onclick="window.toggleChat()">
                <i class="fa-solid fa-robot"></i>
                <span>AI ìƒë‹´</span>
            </button>
        </div>

        <div class="footer-info">
            <p><span class="footer-bold">ì²­ê°œêµ¬ë¦¬ìƒ¤ì‹œ</span> | ëŒ€í‘œ: ì „ì˜ì›… | ì‚¬ì—…ì: 123-36-31426 | ğŸ“ 010-2322-0949</p>
            <p>ë³¸ ì„œë¹„ìŠ¤ëŠ” ì°¸ê³ ìš© ë³´ì¡° ë„êµ¬ì´ë©° ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. | â“’ 2026 Cheong-gaeguri Corp.</p>
        </div>
    </div>

    <div id="manualModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <div class="modal-title">ğŸ¸ ì•± ì‚¬ìš©ë²•</div>
            <div style="text-align:left; color:#636e72; font-size:0.9rem; line-height:1.6;">
                1. <b>ì „ì²´ ì£¼ì†Œì™€ í˜„ì¥ì •ë³´ ìœ„ì¹˜</b>ë¥¼ ì…ë ¥í•˜ì„¸ìš”.<br>
                2. <b>[1. ë©€ë¦¬ì„œ ì°ê¸°]</b>: ë°© ì „ì²´ë‚˜ ì°½í˜¸ ì „ì²´ê°€ ë‚˜ì˜¤ê²Œ ì°ìœ¼ì„¸ìš”. (ìœ„ì¹˜ íŒŒì•…ìš©)<br>
                3. <b>[2. ê°€ê¹Œì´ ì°ê¸°]</b>: í•˜ì ë¶€ìœ„ë¥¼ ì‹­ìì„ ì— ë§ì¶° ì°ìœ¼ì„¸ìš”. (ì •ë°€ ë¶„ì„ìš©)<br>
                4. <b>[C. í•˜ì ë‚´ìš©]</b>: "ì°½í˜¸ ìš°ì¸¡ ìˆ˜ì§ë¶ˆëŸ‰" ì²˜ëŸ¼ ì§ì ‘ ì…ë ¥í•˜ë©´ AIê°€ ë” ì •í™•í•˜ê²Œ ë¶„ì„í•©ë‹ˆë‹¤.<br>
                5. <b>ê³µì¢…, ì„¸ë¶€, ìœ í˜•, ë¶„ì„ë¦¬í¬íŠ¸</b>ëŠ” AIê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.<br>
                6. ë¶„ì„ ê²°ê³¼ í™•ì¸ í›„ <b>ë™ì˜ ì²´í¬</b> -> <b>[ë¦¬ìŠ¤íŠ¸ ì €ì¥]</b>ì„ ëˆ„ë¥´ì„¸ìš”.<br>
                7. <b>PDFì €ì¥</b>ì„ ëˆ„ë¥´ë©´ í°ì˜ ë‚´íŒŒì¼ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                8. ì •ë°€í•œ ì§„ë‹¨ì„ ì›í•˜ì‹œë©´ <b>ìœ ë£Œ</b>ë¡œ ì‹ ì²­í•˜ì„¸ìš”.
            </div>
            
            <div class="manual-check-row">
                <input type="checkbox" id="manualCheck" onchange="window.closeManual()">
                <label for="manualCheck">ë„¤, ëª¨ë‘ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</label>
            </div>
        </div>
    </div>

    <div class="chat-float-btn" onclick="window.toggleChat()">
        ì±—ë´‡
    </div>

    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <span>ğŸ¸ ì²­ê°œêµ¬ë¦¬ ì±—ë´‡</span>
            <span class="chat-close-btn" onclick="window.toggleChat()"><i class="fa-solid fa-xmark"></i></span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-bubble chat-bot">
                ì•ˆë…•í•˜ì„¸ìš”! ì²­ê°œêµ¬ë¦¬ ìƒ¤ì‹œì…ë‹ˆë‹¤.<br>
                ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?
            </div>
        </div>
        <div class="chat-options">
            <div class="chat-option-btn" onclick="window.askBot('cost')">ğŸ’° ë¹„ìš© ì•ˆë‚´</div>
            <div class="chat-option-btn" onclick="window.askBot('reason')">ğŸ“‰ ì‹¼ ì´ìœ ?</div> <div class="chat-option-btn" onclick="window.askBot('defect')">ğŸ› ï¸ ì¤‘ëŒ€í•˜ìë€?</div>
            <div class="chat-option-btn" onclick="window.askBot('booking')">ğŸ“… ì˜ˆì•½ ë°©ë²•</div>
        </div>
    </div>

    <script type="importmap">
        { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
    </script>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        const part1 = "AIzaSyAP_9dcbRPRdP4"; 
        const part2 = "GD6WniQsWixFUFYRhfig";
        const API_KEY = part1 + part2;
        const GOOGLE_FORM_URL = "https://forms.gle/iF9t9gXCHkuMQj8W6"; 

        let defectDataList = [];
        let currentWideFile = null;
        let currentCloseFile = null;
        let clickCount = 0; let clickTimer; const DAILY_LIMIT = 100;

        window.addEventListener('DOMContentLoaded', () => {
            const isDev = localStorage.getItem('is_developer') === 'true';
            if (isDev) document.getElementById('versionBadge').classList.add('dev-active');
            
            const workType = document.getElementById('workType');
            ['íƒ€ì¼ê³µì‚¬','ë„ë°°ê³µì‚¬','ë§ˆë£¨ê³µì‚¬','ì°½í˜¸ê³µì‚¬','ê°€êµ¬ê³µì‚¬','ê¸°íƒ€ê³µì‚¬'].forEach(t => {
                let opt = document.createElement('option'); opt.value = t; opt.innerText = t; workType.appendChild(opt);
            });
        });

        window.checkDevMode = function() {
            clearTimeout(clickTimer); clickCount++;
            if (clickCount === 5) {
                const isDev = localStorage.getItem('is_developer') === 'true';
                localStorage.setItem('is_developer', !isDev);
                const badge = document.getElementById('versionBadge');
                if (!isDev) { alert("ğŸ¸ ê°œë°œì ëª¨ë“œ í™œì„±í™”!"); badge.classList.add('dev-active'); }
                else { alert("ê°œë°œì ëª¨ë“œ í•´ì œ."); badge.classList.remove('dev-active'); }
                clickCount = 0;
            }
            clickTimer = setTimeout(() => { clickCount = 0; }, 1000);
        };

        function checkDailyLimit() {
            const isDev = localStorage.getItem('is_developer') === 'true';
            if (isDev) return true;
            const today = new Date().toDateString();
            let usageData = JSON.parse(localStorage.getItem('frog_app_usage') || '{}');
            if (usageData.date !== today) { usageData = { date: today, count: 0 }; }
            if (usageData.count >= DAILY_LIMIT) {
                alert(`âš ï¸ ì¼ì¼ ë¬´ë£Œ í•œë„(${DAILY_LIMIT}íšŒ) ì´ˆê³¼.`);
                return false;
            }
            usageData.count++;
            localStorage.setItem('frog_app_usage', JSON.stringify(usageData));
            return true;
        }

        function updateStatus(msg, isError = false) {
            const statusMsg = document.getElementById('statusMsg');
            const icon = document.querySelector('#statusPill i');
            statusMsg.innerText = msg;
            icon.className = isError ? "fa-solid fa-circle-exclamation" : "fa-solid fa-circle-check";
            icon.style.color = isError ? "#e74c3c" : "#00b09b";
        }

        window.toggleSaveButton = function() {
            const chk = document.getElementById('inlineAgreeCheck');
            const btn = document.getElementById('btnSaveList');
            btn.disabled = !chk.checked;
            btn.style.background = chk.checked ? 'linear-gradient(to bottom, #3498db, #2980b9)' : '#b2bec3';
            btn.style.cursor = chk.checked ? 'pointer' : 'not-allowed';
        }

        window.openManual = function() { 
            document.getElementById('manualCheck').checked = false; 
            document.getElementById('manualModal').style.display = 'flex'; 
        };
        
        window.closeManual = function() { 
            if(document.getElementById('manualCheck').checked) {
                document.getElementById('manualModal').style.display = 'none'; 
            }
        };
        window.openPaidService = function() { document.getElementById('paidServiceModal').style.display = 'flex'; };
        window.goToGoogleForm = function() { window.open(GOOGLE_FORM_URL, '_blank'); };

        document.getElementById('cameraInputWide').addEventListener('change', (e) => handleImage(e, 'wide'));
        document.getElementById('cameraInputClose').addEventListener('change', (e) => handleImage(e, 'close'));

        function handleImage(event, type) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                if(type === 'wide') {
                    currentWideFile = file;
                    const p = document.getElementById('previewImageWide');
                    p.src = e.target.result; p.style.display = 'block';
                    updateStatus("ì´ì œ 2ë²ˆ(ê°€ê¹Œì´ ì°ê¸°)ì„ ì´¬ì˜í•˜ì„¸ìš”.");
                } else {
                    if (!checkDailyLimit()) { document.getElementById('cameraInputClose').value = ""; return; }
                    currentCloseFile = file;
                    const p = document.getElementById('previewImageClose');
                    p.src = e.target.result; p.style.display = 'block';
                    runTargetedAnalysis();
                }
            };
            reader.readAsDataURL(file);
        }

        async function fileToGenerativePart(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onloadend = () => resolve({ inlineData: { data: reader.result.split(',')[1], mimeType: file.type } });
                reader.readAsDataURL(file);
            });
        }

        async function runTargetedAnalysis() {
            const detailBox = document.getElementById('defectDetail');
            const photoBtn = document.getElementById('photoAreaBtn');
            const userDefectInput = document.getElementById('userDefectInput').value; // [ì¶”ê°€] ì‚¬ìš©ì ì…ë ¥ê°’

            detailBox.value = "AIê°€ ì •ë°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...";
            updateStatus("AI ë“€ì–¼ ì •ë°€ ë¶„ì„ ì¤‘...");
            photoBtn.style.opacity = '0.7';

            try {
                const genAI = new GoogleGenerativeAI(API_KEY);
                const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash-exp" });
                
                // [ìˆ˜ì •] í”„ë¡¬í”„íŠ¸ì— ì‚¬ìš©ì ì…ë ¥(userDefectInput) ë°˜ì˜
                const prompt = `
                    ì…ì£¼ì ì‚¬ì „ì ê²€ AIì…ë‹ˆë‹¤.
                    ì‚¬ì§„ 1(Wide): ê³µì¢…(Work Type) íŒŒì•….
                    ì‚¬ì§„ 2(Close): í•˜ì ìœ í˜•(Type) ë° ìƒì„¸ ë‚´ìš©(Detail) íŒŒì•….
                    
                    **[ì‚¬ìš©ì ì¶”ê°€ ì…ë ¥ ì •ë³´]: "${userDefectInput}"**
                    (ì´ ì •ë³´ê°€ ìˆë‹¤ë©´, ì´ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ë°˜ì˜í•˜ì—¬ ë¶„ì„ ê²°ê³¼ë¥¼ ìƒì„±í•˜ì„¸ìš”.)

                    [ì¶œë ¥ í˜•ì‹ JSON]
                    {
                        "work": "ê³µì¢…ëª…(ì˜ˆ: ì°½í˜¸ê³µì‚¬)",
                        "sub": "ì„¸ë¶€ê³µì¢…ëª…(ì˜ˆ: PLì°½í˜¸)",
                        "type": "í•˜ììœ í˜•(ì˜ˆ: íŒŒì†/ì°í˜/ì˜¤ì—¼/ìˆ˜ì§ìˆ˜í‰ë¶ˆëŸ‰)",
                        "detail": "1. í˜„ìƒ: [ë³´ì´ëŠ” ëŒ€ë¡œ ê¸°ìˆ  + ì‚¬ìš©ì ì…ë ¥ ë‚´ìš© ë°˜ì˜]\\n2. ğŸ’¡ì‚¬ë¡€ë§¤ì¹­: [êµ­í† ë¶€ í•˜ì íŒì • ê¸°ì¤€ ì°¸ê³  ì„¤ëª…]"
                    }
                `;
                
                const parts = [prompt];
                if (currentWideFile) parts.push(await fileToGenerativePart(currentWideFile)); 
                if (currentCloseFile) parts.push(await fileToGenerativePart(currentCloseFile)); 

                const result = await model.generateContent(parts);
                const response = await result.response;
                const text = response.text();
                
                let data = {};
                try {
                    let cleanText = text.replace(/```json/g, "").replace(/```/g, "").trim();
                    const jsonMatch = cleanText.match(/\{[\s\S]*\}/);
                    if (jsonMatch) data = JSON.parse(jsonMatch[0]);
                    else throw new Error("JSON Parse Error");
                } catch (e) {
                    data = { detail: "í…ìŠ¤íŠ¸ ë³€í™˜ ì‹¤íŒ¨. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.", work: "ê¸°íƒ€", sub: "", type: "í™•ì¸í•„ìš”" };
                }

                applyDataToUI(data);
                updateStatus("ë¶„ì„ ì™„ë£Œ! í™•ì¸ í›„ ë™ì˜í•´ì£¼ì„¸ìš”.");
            } catch (error) {
                console.error("AI Error:", error);
                updateStatus("ë¶„ì„ ì‹¤íŒ¨", true);
                detailBox.value = "ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
            } finally {
                photoBtn.style.opacity = '1';
            }
        }

        function applyDataToUI(data) {
            document.getElementById('workType').value = data.work || "";
            const subSelect = document.getElementById('subWorkType');
            subSelect.innerHTML = `<option value="${data.sub}">${data.sub}</option>`;
            subSelect.value = data.sub || ""; 
            document.getElementById('defectType').value = data.type || "";
            document.getElementById('defectDetail').value = (data.detail || "") + "\n\n(â€» AI ë¶„ì„ ê²°ê³¼ëŠ” ë‹¨ìˆœ ì°¸ê³ ìš©ì…ë‹ˆë‹¤.)";
        }

        window.addToList = function() {
            if(!document.getElementById('inlineAgreeCheck').checked) { alert("ë™ì˜í•´ì£¼ì„¸ìš”."); return; }
            
            const wideSrc = document.getElementById('previewImageWide').src;
            const closeSrc = document.getElementById('previewImageClose').src;
            
            if (!currentCloseFile && (!closeSrc || closeSrc.includes('data:image/svg+xml'))) { 
                alert("ì‚¬ì§„ ì´¬ì˜(ê°€ê¹Œì´ ì°ê¸°)ì´ í•„ìš”í•©ë‹ˆë‹¤."); return; 
            }
            
            const fullAddr = document.getElementById('fullAddress').value;
            const finalAptName = document.getElementById('aptName').value || (fullAddr ? "ì£¼ì†Œì°¸ì¡°" : "OOì•„íŒŒíŠ¸");
            const fullAptInfo = `${fullAddr} (${finalAptName} ${document.getElementById('aptDong').value} ${document.getElementById('aptHo').value})`;
            
            document.getElementById('currentAptInfo').innerText = fullAptInfo;
            document.getElementById('pdf-header-title').innerText = fullAptInfo + " ì‚¬ì „ì ê²€ ë¦¬í¬íŠ¸";

            const uniqueId = Date.now();
            const itemData = {
                id: uniqueId, 
                room: document.getElementById('roomSelect').value || "ìœ„ì¹˜ë¯¸ì§€ì •", 
                work: document.getElementById('workType').value,
                sub: document.getElementById('subWorkType').value, 
                type: document.getElementById('defectType').value,
                detail: document.getElementById('defectDetail').value, 
                wideImg: (wideSrc && !wideSrc.includes('svg')) ? wideSrc : null,
                closeImg: closeSrc
            };
            defectDataList.push(itemData);

            const itemHtml = `
                <div class="list-item" id="item-${uniqueId}">
                    <div class="list-room-work">${itemData.room} | ${itemData.work}</div>
                    <div class="list-photos">
                        ${itemData.wideImg ? `<img src="${itemData.wideImg}" class="list-thumb">` : ''}
                        <img src="${itemData.closeImg}" class="list-thumb" style="${!itemData.wideImg ? 'width:100%' : ''}">
                    </div>
                    <div class="list-content">
                        <div class="list-type">${itemData.type}</div>
                        <div class="list-detail">${itemData.detail}</div>
                    </div>
                    <div class="list-footer">
                        <button class="btn-edit-item" onclick="window.editItem(${uniqueId})">ìˆ˜ì •</button>
                        <button class="btn-delete-item" onclick="window.deleteItem(${uniqueId})">ì‚­ì œ</button>
                    </div>
                </div>
            `;
            
            document.getElementById('listBox').insertAdjacentHTML('beforeend', itemHtml); 
            document.getElementById('listCount').innerText = `(${defectDataList.length})`;
            
            // [ìˆ˜ì •] ì…ë ¥ê°’ ì´ˆê¸°í™” ì‹œ ì‚¬ìš©ì ì…ë ¥ì°½ë„ ì´ˆê¸°í™”
            document.getElementById('cameraInputWide').value = "";
            document.getElementById('cameraInputClose').value = "";
            currentWideFile = null; currentCloseFile = null;
            document.getElementById('previewImageWide').style.display = 'none';
            document.getElementById('previewImageClose').style.display = 'none';
            document.getElementById('userDefectInput').value = ""; 
            document.getElementById('defectDetail').value = ""; 
            document.getElementById('inlineAgreeCheck').checked = false;
            window.toggleSaveButton();
            updateStatus("ë‹¤ìŒ í•­ëª©ì„ ì´¬ì˜í•˜ì„¸ìš”.");
            document.querySelector('.list-header-box').scrollIntoView({behavior: "smooth"});
        };

        window.editItem = function(id) {
            const itemIndex = defectDataList.findIndex(i => i.id === id);
            if (itemIndex === -1) return;
            const item = defectDataList[itemIndex];
            
            document.getElementById('roomSelect').value = item.room;
            document.getElementById('workType').value = item.work;
            document.getElementById('defectDetail').value = item.detail;
            
            if(item.wideImg) {
                const pWide = document.getElementById('previewImageWide');
                pWide.src = item.wideImg; pWide.style.display = 'block';
            }
            const pClose = document.getElementById('previewImageClose');
            pClose.src = item.closeImg; pClose.style.display = 'block';
            
            if(confirm("ìˆ˜ì • ëª¨ë“œë¡œ ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? (ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œë©ë‹ˆë‹¤)")) {
                document.getElementById(`item-${id}`).remove();
                defectDataList.splice(itemIndex, 1);
                document.getElementById('listCount').innerText = `(${defectDataList.length})`;
                window.scrollTo(0, 0); 
            }
        };

        window.deleteItem = function(id) {
            if(confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                document.getElementById(`item-${id}`).remove();
                defectDataList = defectDataList.filter(i => i.id !== id);
                document.getElementById('listCount').innerText = `(${defectDataList.length})`;
            }
        };
        
        window.savePDF = function() {
            if(defectDataList.length === 0) { alert("ì €ì¥í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤."); return; }
            window.print(); 
        };

        /* ì±—ë´‡ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ */
        window.toggleChat = function() {
            const chatWindow = document.getElementById('chatWindow');
            if(chatWindow.style.display === 'flex') {
                chatWindow.style.display = 'none';
            } else {
                chatWindow.style.display = 'flex';
                const chatBody = document.getElementById('chatBody');
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        };

        window.askBot = function(type) {
            const chatBody = document.getElementById('chatBody');
            let userText = "";
            let botText = "";

            if(type === 'cost') {
                userText = "ë¹„ìš©ì´ ê¶ê¸ˆí•´ìš”.";
                botText = "ğŸ’° [ì ê²€ ë¹„ìš© ì•ˆë‚´]<br>20í‰í˜•: 9ë§Œì›<br>30í‰í˜•: 11ë§Œì›<br>40í‰í˜•: 13ë§Œì›<br><br>â€» ìˆ˜ë„ê¶Œ ì™¸ ì§€ì—­ì€ ì¶”ê°€ ì¶œì¥ë¹„ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            } else if(type === 'reason') {
                userText = "ì ê²€ ë¹„ìš©ì´ ì™œ ì´ë ‡ê²Œ ì‹¼ê°€ìš”?";
                botText = "ğŸ’¡ [ì ê²€ ë¹„ìš©ì´ ì €ë ´í•œ ì´ìœ ]<br>1. AI ë„ì…ìœ¼ë¡œ ì‹œê°„/ë¹„ìš© íšê¸°ì  ì ˆê°<br>2. ë³´ì—¬ì£¼ê¸°ì‹ ë¶ˆí•„ìš”í•œ ê²€ì‚¬ ë°°ì œ<br>3. ê²€ì‚¬ ì§í›„ 1ë¶„ ë‚´ ìë£Œì „ì†¡ ì‹œìŠ¤í…œ êµ¬ì¶•<br><br>ê±°í’ˆì„ ëº€ ì‹¤ì† ìˆëŠ” ê°€ê²©ì…ë‹ˆë‹¤!";
            } else if(type === 'location') {
                userText = "ì¶œì¥ ì§€ì—­ì€ ì–´ë””ì¸ê°€ìš”?";
                botText = "ğŸ“ ì„œìš¸, ê²½ê¸°, ì¸ì²œ ì „ ì§€ì—­ ì¶œì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>ê·¸ ì™¸ ì§€ì—­ì€ ìœ ì„ ìœ¼ë¡œ ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br>ğŸ“ 010-2322-0949";
            } else if(type === 'defect') {
                userText = "ì¤‘ëŒ€í•˜ìê°€ ë¬´ì—‡ì¸ê°€ìš”?";
                botText = "ğŸ› ï¸ [ì¤‘ëŒ€í•˜ì ì§‘ì¤‘ ì ê²€]<br>ì œì‘ë¶ˆëŸ‰, ì‹œê³µë¶ˆëŸ‰, ê²°ë¡œ, ì™¸í’ì„ ì¤‘ì ìœ¼ë¡œ ê²€ì‚¬í•©ë‹ˆë‹¤.<br>ì²­ê°œêµ¬ë¦¬ëŠ” ì˜¤ì—¼, í ì§‘ë³´ë‹¤ ì¤‘ëŒ€ í•˜ìë¥¼ ì§‘ì¤‘ì ìœ¼ë¡œ ì°¾ì•„ëƒ…ë‹ˆë‹¤!";
            } else if(type === 'booking') {
                userText = "ì˜ˆì•½ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?";
                botText = "ğŸ“… [ì˜ˆì•½ ë°©ë²•]<br>1. í•˜ë‹¨ 'ìœ ë£Œì˜ˆì•½' ë²„íŠ¼ í´ë¦­<br>2. ì‹ ì²­ì„œ ì‘ì„± ë° ì…ê¸ˆ<br>3. 010-2322-0949ë¡œ 'ì…ê¸ˆìëª…/ë‚ ì§œ' ë¬¸ì ë°œì†¡<br><br>í™•ì¸ í›„ í™•ì • ë¬¸ìë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤!";
            }

            chatBody.innerHTML += `<div class="chat-bubble chat-user">${userText}</div>`;
            
            setTimeout(() => {
                chatBody.innerHTML += `<div class="chat-bubble chat-bot">${botText}</div>`;
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 300);
        };
    </script>
</body>
</html>
